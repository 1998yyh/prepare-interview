# 彻底搞懂HTTP知识的面试题

## 如何理解URI
URI, 全称为(Uniform Resource Identifier), 也就是统一资源标识符，它的作用很简单，就是区分互联网上不同的资源。它不是我们一般说的URL，指的是URL+URN，由于URL过于普及，默认将URI视为URL了。

### URI的结构

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/340fe9cb7fef4e03941cb17c79f79c49~tplv-k3u1fbpfcp-zoom-1.image)

* scheme  表示协议名，比如http, https, file等等。后面必须和://连在一起。
* user:passwd@ 表示登录主机时的用户信息，不过很不安全，不推荐使用，也不常用。
* host:port 表示主机名和端口。
* path 表示请求路径，标记资源所在位置。
* query 表示查询参数，为key=val这种形式，多个键值对之间用&隔开。
* fragment 表示 URI 所定位的资源内的一个锚点，浏览器可以根据这个锚点跳转到对应的位置。

## HTTP 超文本传输协议

### HTTP 的特点？HTTP 有哪些缺点？

#### HTTP 的特点概括
* 灵活可扩展
	* 一个是语义上的自由，只规定了基本格式，比如空格分隔单词，换行分隔字段，其他的各个部分都没有严格的语法限制
	* 另一个是传输形式的多样性，不仅仅可以传输文本，还能传输图片、视频等任意数据，非常方便。
* 可靠传输 HTTP 基于 TCP/IP，因此把这一特性继承了下来。这属于 TCP 的特性，不具体介绍了。
* 请求-应答 也就是一发一收、有来有回， 当然这个请求方和应答方不单单指客户端和服务器之间，如果某台服务器作为代理来连接后端的服务端，那么这台服务器也会扮演请求方的角色。
* 无状态 这里的状态是指通信过程的上下文信息，而每次 http 请求都是独立、无关的，默认不需要保留状态信息

#### HTTP 缺点
* 无状态 所谓的优点和缺点还是要分场景来看的，对于 HTTP 而言，最具争议的地方在于它的无状态。
	* 在需要长连接的场景中，需要保存大量的上下文信息，以免传输大量重复的信息，那么这时候无状态就是 http 的缺点了。
	* 但与此同时，另外一些应用仅仅只是为了获取一些数据，不需要保存连接上下文信息，无状态反而减少了网络开销，成为了 http 的优点。
* 明文传输，即协议里的报文(主要指的是头部)不使用二进制数据，而是文本形式。这当然对于调试提供了便利，但同时也让 HTTP 的报文信息暴露给了外界，给攻击者也提供了便利
* 队头阻塞问题，当 http 开启长连接时，共用一个 TCP 连接，同一时刻只能处理一个请求，那么当前请求耗时过长的情况下，其它的请求只能处于阻塞状态，也就是著名的队头阻塞问题。

## HTTP 报文结构是怎样的？

header + body 的结构，具体而言:
```javascript
起始行 + 头部 + 空行 + 实体
```

### 起始行
请求报文： GET /home HTTP/1.1  对应的是 **方法** + **路径** +  **http版本**
响应报文： HTTP/1.1 200 OK 对应的是 **http版本** + **状态码** + **原因**

**注意**：在起始行中，每两个部分之间用空格隔开，最后一个部分后面应该接一个换行，严格遵循 ABNF 语法规范

### 头部

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/43f6e8525aba4627a6342ea40ee1caa8~tplv-k3u1fbpfcp-zoom-1.image)

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4d9e8c160d254922ae4f05baf1148a0a~tplv-k3u1fbpfcp-zoom-1.image)

头部的格式：
*  字段名不区分大小写
*  字段名不允许出现空格，不可以出现下划线 `_`
*  字段名后面必须紧接着 `:`

### 空行
很重要，用来区分开头部和实体。

问: 如果说在头部中间故意加一个空行会怎么样？
那么空行后的内容全部被视为实体。

### 实体
就是具体的数据了，也就是 body 部分。请求报文对应请求体, 响应报文对应响应体。


## 如何理解 HTTP 的请求方法？
http/1.1 规定了以下请求方法(注意，都是大写):
* GET 通常用来获取资源
* HEAD 获取资源的元信息
* POST 提交数据，即上传数据
* PUT 修改数据
* DELETE 删除资源(几乎用不到)
* CONNECT 建立连接隧道，用于代理服务器
* OPTIONS 列出可对资源实行的请求方法，预检请求，用来跨域请求
* TRACE 追踪请求-响应的传输路径

## GET 与 POST

### 说一下 GET 和 POST 的区别？
首先最直观的是语义上的区别（get用于获取数据,post用于提交数据）
而后又有这样一些具体的差别:
* 从缓存的角度 GET 请求会被浏览器主动缓存下来，留下历史记录，而 POST 默认不会。
* 从编码的角度 GET 只能进行 URL 编码，只能接收 ASCII 字符，而 POST 没有限制。
* 从参数的角度 GET 一般放在 URL 中，因此不安全，POST 放在请求体中，更适合传输敏感信息。
* 从幂等性的角度 GET是幂等的，而POST不是。(幂等表示执行相同的操作，结果也是相同的)
* 从TCP的角度 GET 请求会把请求报文一次性发出去，而 POST 会分为两个 TCP 数据包，首先发 header 部分(预检请求)，如果服务器响应 100(continue)， 然后发 body 部分。(火狐浏览器除外，它的 POST 请求只发一个 TCP 包)

